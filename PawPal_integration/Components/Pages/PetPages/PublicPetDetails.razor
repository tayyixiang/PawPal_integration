@page "/pets/{Id:int}"
@using Microsoft.EntityFrameworkCore
@using PawPal_integration.Domain
@using PawPal_integration.Data
@using PawPal_integration.Components.Layout
@inject PawPalContext Context
@layout MainLayout

<div class="container py-4">
    <a href="pets" class="btn btn-outline-secondary mb-3">&larr; Back</a>

    @if (Pet != null)
    {
        <div class="row">
            <div class="col-md-6">
                <img src="@(string.IsNullOrEmpty(Pet.ImageUrl) ? "https://placehold.co/600" : Pet.ImageUrl)" class="img-fluid rounded shadow" />
            </div>
            <div class="col-md-6">
                <h1>@Pet.Name</h1>
                <h4 class="text-muted">@Pet.Breed</h4>
                <p class="mt-3">@Pet.Description</p>
                <div class="card p-3 bg-light mt-4">
                    <h5>Ready to adopt?</h5>
                    <a href="apply?petId=@Pet.Id" class="btn btn-success btn-lg mt-2">Apply Now</a>
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="alert alert-warning">Pet not found.</div>
    }
</div>

@code {
    [Parameter] public int Id { get; set; }
    private Pet? Pet;
    protected override async Task OnInitializedAsync() => Pet = await Context.Pets.FirstOrDefaultAsync(p => p.Id == Id);
}